<project name="build-db-lab" default="make-lab" basedir=".">
  <dirname property="database.platform.dir" file="${ant.file.build-db-lab}" />
  <property name="db.platform" value="oraclepdb" />
  <property name="project.root" value="../../../../" />
  
  <property name="maindir.xst.database.platform" value="../../../../database" />
  <property file="../../../../dev/local/xstore.properties" />
  <property file="../../../../dev/local/system.properties" />
  <property file="../../../../root/system.properties" />
  <property file="${maindir.xst.database.platform}/build.properties" />
  <property file="../../../local/db/oraclepdb/build.properties" />
  

  <property name="db.custId" value="${dtv.CustomerId}" />  
  
  <condition property="ismssql"><equals arg1="${db.platform}" arg2="mssql" trim="true" casesensitive="false" /></condition>
  <condition property="ismssqlunicode"><equals arg1="${db.platform}" arg2="mssql-unicode" trim="true" casesensitive="false" /></condition>
  <condition property="isoracle"><equals arg1="${db.platform}" arg2="oracle" trim="true" casesensitive="false" /></condition>
  <condition property="isoraclepdb"><equals arg1="${db.platform}" arg2="oraclepdb" trim="true" casesensitive="false" /></condition>
  
  <target name="make-lab">
      <antcall target="make-lab-oracle-pdb" inheritRefs="true" />
  </target>
  
 
  <target name="make-lab-oracle-pdb" if="isoraclepdb">
    <ant antfile="${maindir.xst.database.platform}/build.xml" target="make" inheritRefs="true">
      <property name="db.name" value="${db.custId}_xstore${db.name.version}${db.name.owner}" />
      <property name="db.schema" value="dtv" />
      <property name="db.posuser" value="pos" />
      <property name="db.path.seed" location="${db.path.seed}" />
      <property name="db.path.data" location="${db.path.data.prefix}/${db.custId}_xstore${db.name.version}${db.name.owner}" />
    </ant>
    <ant antfile="${maindir.xst.database.platform}/build.xml" target="make-replication" inheritRefs="true">
      <property name="db.name" value="${db.custId}_repqueue${db.name.version}${db.name.owner}" />
      <property name="db.schema" value="dtv" />
      <property name="db.posuser" value="pos" />
      <property name="db.path.seed" location="${db.path.seed}" />
      <property name="db.path.data" location="${db.path.data.prefix}/${db.custId}_repqueue${db.name.version}${db.name.owner}" />
    </ant>
    <ant antfile="${maindir.xst.database.platform}/build.xml" target="make-clone" inheritRefs="true">
      <property name="db.name" value="${db.custId}_xtraining${db.name.version}${db.name.owner}" />
      <property name="db.schema" value="dtv" />
      <property name="db.posuser" value="pos" />
      <property name="db.path.data" value="${db.path.data.prefix}/${db.custId}_xtraining${db.name.version}${db.name.owner}" />
      <property name="origin.db.name" value="${db.custId}_xstore${db.name.version}${db.name.owner}" />
      <property name="origin.db.data.file.path" location="${db.path.data.prefix}/${db.custId}_xstore${db.name.version}${db.name.owner}" />
    </ant>
    <ant antfile="${maindir.xst.database.platform}/build.xml" target="make-clone" inheritRefs="true">
      <property name="db.name" value="${db.custId}_xcenter${db.name.version}" />
      <property name="db.schema" value="dtv" />
      <property name="db.posuser" value="pos" />
      <property name="db.path.data" value="${db.path.data.prefix}/${db.custId}_xcenter${db.name.version}" />
      <property name="origin.db.name" value="${db.custId}_xstore${db.name.version}${db.name.owner}" />
      <property name="origin.db.data.file.path" location="${db.path.data.prefix}/${db.custId}_xstore${db.name.version}${db.name.owner}" />
    </ant>
  </target>
 
</project>